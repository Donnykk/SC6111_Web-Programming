<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Meta Swap</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <div class="sidebar">
        <div class="logo">
            <img src="./src/portfolio.svg" style="width: 100%; height:auto;" />
        </div>
        <ul class="menu">
            <li><a href="https://portfolio.metamask.io/">Overview</a></li>
            <li><a href="#portfolio" style="color:aqua; font-weight:bold">Move Crypto</a></li>
            <li><a href="https://portfolio.metamask.io/explore/tokens">Tokens</a></li>
            <li><a href="https://portfolio.metamask.io/explore/nfts">NFTs</a></li>
            <li><a href="https://portfolio.metamask.io/games">Games</a></li>
        </ul>
        <div class="settings">
            <a href="#settings">Settings</a>
        </div>
    </div>
    <div class="main">
        <div class="top_bar">
            <h1>Swap</h1>
            <div class="button_group">
                <input type="search" id="search_box" placeholder="         Search for a token ...">

                <button type="button" id="gas_button" onclick="open_gas_popup(this)">
                    <img src="./src/bt1.png" alt="logo" style="vertical-align: middle;">
                </button>
                <div id="gas_popup">
                    <div>
                        <div>Real-time gas prices</div>
                    </div>
                    <div>
                        <select class="dropdown" name="options">
                            <option value="option1">Ethereum</option>
                            <option value="option2">Optimism</option>
                            <option value="option3">Cronos</option>
                            <option value="option4">BNB Chain</option>
                            <option value="option5">Polygon</option>
                        </select>
                    </div>
                    <div>
                        <div style="font-size: small;">Base fee: 0.88 GWEI</div>
                    </div>

                    <div>
                        <table class="fee_tb">
                            <tr>
                                <td style="font-size:medium; margin-top: 5%; margin-left:5%">Priority Fee</td>
                            </tr>
                            <tr>
                                <td style="align-content: start;">Fast</td>
                                <td style="margin-right: 0%">2.00 GWEI</td>
                            </tr>
                            <tr>
                                <td style="align-content: start;">Average</td>
                                <td style="margin-right: 0%">0.20 GWEI</td>
                            </tr>
                            <tr>
                                <td style="align-content: start;">Safe</td>
                                <td style="margin-right: 0%">0.00 GWEI</td>
                            </tr>
                        </table>
                    </div>
                    <button type="button" id="gas_close_button" onclick="close_gas_popup()">close</button>
                </div>

                <button type="button" id="note_button" onclick="open_note_popup(this)">
                    <img src="./src/bt2.png" alt="logo" style="vertical-align: middle;">
                </button>
                <div id="note_popup">
                    <div id="note_body">
                        <button type="button" class="note_btn" title="note1">
                            <div class="note_head">
                                <div class="title">Explore web3-powered games in the Games tab</div>
                                <div class="date">Jun 5</div>
                            </div>
                            <div class="text">Find your favorite web3 game through our new games directory</div>
                        </button>

                        <button type="button" class="note_btn" title="note1">
                            <div class="note_head">
                                <div class="title">Track your holdings on exchanges</div>
                                <div class="date">Apr 16</div>
                            </div>
                            <div class="text">Download the MetaMask app for iOS or Android to get started and import
                                your wallet using your secret recovery phrase.</div>
                        </button>

                        <button type="button" class="note_btn" title="note1">
                            <div class="note_head">
                                <div class="title">Donâ€™t miss out on airdrops and new NFT mints!</div>
                                <div class="date">Apr 9</div>
                            </div>
                            <div class="text">Bridge with zkSync, Base, and Linea</div>
                        </button>

                        <button type="button" class="note_btn" title="note1">
                            <div class="note_head">
                                <div class="title">Robinhood and Revolut join the show</div>
                                <div class="date">Jul 8</div>
                            </div>
                            <div class="text">Find your favorite web3 game through our new games directory</div>
                        </button>

                        <button type="button" class="note_btn" title="note1">
                            <div class="note_head">
                                <div class="title">Stake smarter with Validator Staking</div>
                                <div class="date">Jun 5</div>
                            </div>
                            <div class="text">The MetaMask mobile app - on iOS and Android</div>
                        </button>

                        <button type="button" class="note_btn" title="note1">
                            <div class="note_head">
                                <div class="title">Welcome Stripe, Ramp, Squid and Across!</div>
                                <div class="date">Jun 5</div>
                            </div>
                            <div class="text">MetaMask does not have access to your exchange login credentials nor do we
                                share your MetaMask wallet addresses with any third parties.</div>
                        </button>

                        <button type="button" class="note_btn" title="note1">
                            <div class="note_head">
                                <div class="title">Buy crypto with MetaMask</div>
                                <div class="date">Jun 5</div>
                            </div>
                            <div class="text">Find your favorite web3 game through our new games directory</div>
                        </button>
                    </div>

                    <button type="button" id="note_close_button" onclick="close_note_popup()">close</button>
                </div>

                <button type="button" id="connect_button">
                    Connect Wallet
                </button>
            </div>
        </div>
        <div class="content">
            <div class="swap-container">
                <div>
                    <select class="dropdown" name="options">
                        <option value="option1">Ethereum</option>
                        <option value="option2">Optimism</option>
                        <option value="option3">Cronos</option>
                        <option value="option4">BNB Chain</option>
                        <option value="option5">Polygon</option>
                    </select>
                </div>

                <div style="font-size: medium; margin-top:20px;">Swap From</div>
                <div class="group1">
                    <select class="dropdown1">
                        <option value="option1">ETH</option>
                    </select>
                    <input class="input1" placeholder="0" />
                </div>

                <div style="font-size: medium; margin-top:20px;">Swap To</div>
                <div>
                    <select class="dropdown2">
                        <option value="option1">ETH</option>
                    </select>
                </div>

                <div style="margin: auto; width:fit-content">
                    <select class="option_dropdown">
                        <option>Advanced options</option>
                    </select>
                </div>

                <button type="button" id="connect_button_">
                    Connect wallet
                </button>

                <div id="balance"></div>

                <button type="button" id="term_button">
                    Terms of Service
                </button>
            </div>
        </div>
    </div>
</body>

<script>
    function open_gas_popup(button) {
        const rect = button.getBoundingClientRect();
        const popup = document.getElementById('gas_popup');
        popup.style.display = 'block';
        popup.style.top = rect.bottom + 'px';
        popup.style.left = rect.left + 'px';
    }

    function close_gas_popup() {
        document.getElementById('gas_popup').style.display = 'none';
    }
    function open_note_popup(button) {
        const rect = button.getBoundingClientRect();
        const popup = document.getElementById('note_popup');
        popup.style.display = 'block';
        popup.style.top = rect.bottom + 'px';
        const left = rect.left + (rect.width / 2) - (popup.getBoundingClientRect().width / 2);
        popup.style.left = left + 'px';
    }

    function close_note_popup() {
        document.getElementById('note_popup').style.display = 'none';
    }

    $(document).ready(function () {
        if (typeof window.ethereum !== 'undefined') {
            const web3 = new Web3(window.ethereum);
            async function handleClick() {
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    const account = accounts[0];
                    const balanceWei = await web3.eth.getBalance(account);
                    const balanceEth = web3.utils.fromWei(balanceWei, 'ether');
                    $('#balance').text('Balance:  ' + balanceEth);
                    $('#balance').css('display', 'block');
                    $('#connect_button_').css('display', 'none');
                } catch (error) {
                    console.error('Error:', error);
                }
            }
            $('#connect_button').click(handleClick);
            $('#connect_button_').click(handleClick);
        } else {
            alert('Metamask not installed!');
        }
    })
</script>

</html>